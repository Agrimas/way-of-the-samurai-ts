(this["webpackJsonpway-of-the-samurai-ts"]=this["webpackJsonpway-of-the-samurai-ts"]||[]).push([[0],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(14),a=n(2),c="ADD-MESSAGE",i={dialogs:[{id:1,name:"Dima"},{id:2,name:"Sveta"}],messages:[{id:1,text:"Hi",isMine:!0},{id:2,text:"Hi",isMine:!1},{id:3,text:"How are you?",isMine:!0}]};var o=function(e){return{type:c,text:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:456,text:t.text,isMine:!0};return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}}},108:function(e,t,n){e.exports={App:"App_App__17MKp"}},109:function(e,t,n){e.exports={item:"Friend_item__3hYa2"}},111:function(e,t,n){e.exports={container:"Users_container__1fmfa"}},112:function(e,t,n){e.exports={container:"Preloader_container__1t_d9"}},113:function(e,t,n){e.exports={main_photo:"InfoProfile_main_photo__ZwzdV",container:"InfoProfile_container__DV8ay"}},125:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(53),i=n.n(c),o=(n(125),n(108)),s=n.n(o),u=n(13),l=n(32),j=n.n(l),b=n(17),d=n(72),f=n.n(d),p=n(109),O=n.n(p),h=n(0);function x(e){var t=e.name;return Object(h.jsxs)("div",{className:O.a.item,children:[Object(h.jsx)("img",{src:"https://img.novosti-n.org/upload/ukraine/499685.jpg",alt:""}),t]})}function m(e){var t=e.friends.map((function(e){return Object(h.jsx)(x,{name:e.name})}));return Object(h.jsxs)("div",{className:f.a.friendsWrap,children:[Object(h.jsx)("h2",{children:"My friends"}),Object(h.jsxs)("div",{className:f.a.friends,children:[t[0],t[1],t[2]]})]})}var v=Object(u.b)((function(e){return{friends:e.friends}}),{})((function(e){return Object(h.jsxs)("div",{className:j.a.Sidebar,children:[Object(h.jsxs)("nav",{children:[Object(h.jsx)(b.b,{to:"/profile",className:j.a.navlink,activeClassName:j.a.active,children:"Profile"}),Object(h.jsx)(b.b,{to:"/messages",className:j.a.navlink,activeClassName:j.a.active,children:"Messages"}),Object(h.jsx)(b.b,{to:"/users",className:j.a.navlink,activeClassName:j.a.active,children:"Users"})]}),Object(h.jsx)(m,{friends:e.friends})]})})),g=n(10),_=n(2),k=n(3),w=n.n(k),P=n(4),y=n(11),S=n(14),N=n(110),C=n.n(N).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4e70ea14-87f8-403e-9a3c-6012dce2b89c"}}),F=function(){return C.get("auth/me/").then((function(e){return e.data}))},L=function(e){return C.post("auth/login/",e).then((function(e){return e.data}))},A=function(){return C.delete("auth/login/").then((function(e){return e.data}))},D=function(){return C.get("security/get-captcha-url").then((function(e){return e.data.url}))},E=function(e,t){return C.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},T=function(e){return C.post("follow/".concat(e)).then((function(e){return e.data}))},I=function(e){return C.delete("follow/".concat(e)).then((function(e){return e.data}))},U=function(e){return C.get("profile/".concat(e)).then((function(e){return e.data}))},M=function(e){return C.put("profile",e).then((function(e){return e.data}))},R=function(e){var t=new FormData;return t.append("image",e),C.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},J=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(_.a)(Object(_.a)({},e),r):e}))},H="FOLLOW",B="UNFOLLOW",z="SET-USERS",q="SET-CURRENT-PAGE",V="SET-TOTAL-USERS-COUNT",Y={users:[],pageSize:5,currentPage:1,totalUsersCount:0};var W=function(e){return{type:H,id:e}},Z=function(e){return{type:B,id:e}},G=function(e){return{type:q,currentPage:e}},K=function(){var e=Object(P.a)(w.a.mark((function e(t,n,r,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:0===e.sent.resultCode&&a(r(t));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(_.a)(Object(_.a)({},e),{},{users:J(e.users,"id",t.id,{followed:!0})});case B:return Object(_.a)(Object(_.a)({},e),{},{users:J(e.users,"id",t.id,{followed:!1})});case z:return t.users?Object(_.a)(Object(_.a)({},e),{},{users:Object(S.a)(t.users)}):e;case q:return t.currentPage?Object(_.a)(Object(_.a)({},e),{},{currentPage:t.currentPage}):e;case V:return t.totalUsersCount?Object(_.a)(Object(_.a)({},e),{},{totalUsersCount:t.totalUsersCount}):Object(_.a)({},e);default:return e}},Q=n(61),$=n.n(Q),ee=n.p+"static/media/user.42defa2a.jpg";function te(e,t){t(!0),e().then((function(){t(!1)}))}var ne=function(e){var t=e.id,n=e.name,a=e.status,c=e.photos,i=e.followed,o=e.follow,s=e.unFollow,u=Object(r.useState)(!1),l=Object(y.a)(u,2),j=l[0],d=l[1];function f(){return(f=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(Object(P.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:case"end":return e.stop()}}),e)}))),d);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:$.a.container,children:[Object(h.jsxs)("div",{className:$.a.avatarBlock,children:[Object(h.jsx)(b.b,{to:"/profile/".concat(t),children:Object(h.jsx)("img",{src:c.small?c.small:ee,alt:""})}),Object(h.jsx)("button",{disabled:j,onClick:function(){i?function(e){f.apply(this,arguments)}(t):function(e){te(Object(P.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e);case 2:case"end":return t.stop()}}),t)}))),d)}(t)},children:i?"Unfollow":"Follow"})]}),Object(h.jsxs)("div",{children:[n,", ",Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:$.a.status,children:a})]})]})},re=n(111),ae=n.n(re);function ce(e){var t=e.users,n=e.follow,r=e.unFollow;return Object(h.jsx)("div",{className:ae.a.container,children:t.map((function(e){return Object(h.jsx)(ne,{id:e.id,name:e.name,status:e.status,photos:e.photos,followed:e.followed,follow:n,unFollow:r},e.id)}))})}var ie=n(55),oe=n(27),se=n(6),ue=n(7),le=n(15),je=n(16),be=n.p+"static/media/loader.b57ed06f.svg",de=n(112),fe=n.n(de),pe=function(e){Object(le.a)(n,e);var t=Object(je.a)(n);function n(){return Object(se.a)(this,n),t.apply(this,arguments)}return Object(ue.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:fe.a.container,children:Object(h.jsx)("img",{src:be,alt:""})})}}]),n}(r.Component),Oe=n(38),he=n.n(Oe);var xe=function(e){for(var t=e.currentPage,n=e.onClickPaginationHandler,a=e.totalUsersCount,c=e.pageSize,i=e.portionSize,o=Math.ceil(a/c),s=[],u=1;u<=o;u++)s.push(u);var l=o/i,j=Object(r.useState)(1),b=Object(y.a)(j,2),d=b[0],f=b[1],p=(d-1)*i+1,O=d*i;return Object(h.jsxs)("div",{className:he.a.container,children:[Object(h.jsx)("div",{className:he.a.navButton,children:1!==d&&Object(h.jsx)("button",{onClick:function(){f(d-1)},children:"Prev"})}),Object(h.jsx)("div",{className:he.a.pagination,children:s.filter((function(e){return e>=p&&e<=O})).map((function(e){return Object(h.jsx)("span",{className:t===e?he.a.selectedPage:"",onClick:function(){n(e)},children:e},e)}))}),Object(h.jsx)("div",{className:he.a.navButton,children:d!==l&&Object(h.jsx)("button",{onClick:function(){f(d+1)},children:"Next"})})]})},me=function(e){return e.usersPage.users},ve=function(e){return e.usersPage.pageSize},ge=function(e){return e.usersPage.currentPage},_e=function(e){return e.usersPage.totalUsersCount};var ke=Object(oe.c)(ie.a,Object(u.b)((function(e){return{users:me(e),pageSize:ve(e),currentPage:ge(e),totalUsersCount:_e(e)}}),{follow:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e,T,W,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollow:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e,I,Z,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUsers:function(e,t){return function(){var n=Object(P.a)(w.a.mark((function n(r){var a;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(G(e)),n.next=3,E(e,t);case 3:a=n.sent,r((i=a.items,{type:z,users:i})),r((c=a.totalCount,{type:V,totalUsersCount:c}));case 6:case"end":return n.stop()}var c,i}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){var t=Object(r.useState)(!1),n=Object(y.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!0),o=Object(y.a)(i,2),s=o[0],u=o[1];return Object(r.useEffect)((function(){s&&u(!1),te(Object(P.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUsers(e.currentPage,e.pageSize);case 2:case"end":return t.stop()}}),t)}))),c)}),[e.currentPage]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(xe,{totalUsersCount:e.totalUsersCount,currentPage:e.currentPage,pageSize:e.pageSize,onClickPaginationHandler:function(t){te(Object(P.a)(w.a.mark((function n(){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getUsers(t,e.pageSize);case 2:case"end":return n.stop()}}),n)}))),c)},portionSize:5}),a||s?Object(h.jsx)(pe,{}):Object(h.jsx)(ce,Object(_.a)({},e))]})})),we=n(75),Pe=n.n(we),ye=n(113),Se=n.n(ye),Ne=n(9),Ce=n(24);function Fe(e){var t=e.profile,n=t.userId,a=t.fullName,c=t.contacts,i=t.aboutMe,o=t.lookingForAJob,s=t.lookingForAJobDescription,u=e.updateProfile,l=e.goToViewMode,j=Object.entries(c).map((function(e){var t="contacts."+e[0];return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:t,children:t}),Object(h.jsx)("br",{}),Object(h.jsx)(Ne.b,{id:t,name:t,style:{minWidth:"30%"}}),Object(h.jsx)(Ne.a,{name:t})]})})),b=Object(r.useState)(o),d=Object(y.a)(b,2),f=d[0],p=d[1];return Object(h.jsx)(Ne.d,{initialValues:{userId:n,fullName:a,aboutMe:i,lookingForAJob:f,lookingForAJobDescription:s,contacts:Object(_.a)({},c)},validationSchema:Ce.b({fullName:Ce.c().required(),aboutMe:Ce.c(),lookingForAJob:Ce.a().required(),lookingForAJobDescription:Ce.c()}),onSubmit:function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(h.jsxs)(Ne.c,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"fullName",children:"Full Name"}),Object(h.jsx)("br",{}),Object(h.jsx)(Ne.b,{id:"fullName",name:"fullName"}),Object(h.jsx)(Ne.a,{name:"fullName"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"aboutMe",children:"About me"}),Object(h.jsx)("br",{}),Object(h.jsx)(Ne.b,{id:"aboutMe",name:"aboutMe",as:"textarea"}),Object(h.jsx)(Ne.a,{name:"aboutMe"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"lookingForAJob",children:"Looking for a job"}),Object(h.jsx)(Ne.b,{id:"lookingForAJob",name:"lookingForAJob",type:"checkbox",onClick:function(){p(!f)}}),Object(h.jsx)(Ne.a,{name:"lookingForAJob"})]}),f&&Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"lookingForAJobDescription",children:"Looking for a job description"}),Object(h.jsx)("br",{}),Object(h.jsx)(Ne.b,{id:"lookingForAJobDescription",name:"lookingForAJobDescription",as:"textarea"}),Object(h.jsx)(Ne.a,{name:"lookingForAJobDescription"})]}),j,Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:" Save"})})]})})}function Le(e){var t,n=e.profile,r=n.fullName,a=n.contacts,c=n.aboutMe,i=n.lookingForAJob,o=n.lookingForAJobDescription,s=n.photos,u=e.updatePhoto;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:null!==(t=null===s||void 0===s?void 0:s.small)&&void 0!==t?t:ee,alt:"",style:{width:"100px",height:"100px",objectFit:"contain",borderRadius:"10px"}}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",onChange:function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files){e.next=3;break}return e.next=3,u(t.target.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),Object(h.jsx)("h1",{children:r}),Object(h.jsx)("p",{children:c}),Object(h.jsxs)("p",{children:["Looking for a job: ",i?"Yes":"No"]}),i&&Object(h.jsx)("p",{children:o}),Object.entries(a).map((function(e){return Object(h.jsx)(Ae,{source:e[0],url:e[1]},e[0])}))]})}var Ae=function(e){var t=e.source,n=e.url;return Object(h.jsxs)("div",{children:[t,": ",n]})};function De(e){var t=Object(r.useState)(!1),n=Object(y.a)(t,2),a=n[0],c=n[1];return Object(h.jsx)("div",{className:Se.a.container,children:a?Object(h.jsx)(Fe,Object(_.a)(Object(_.a)({},e),{},{goToViewMode:function(){c(!1)}})):Object(h.jsxs)(h.Fragment,{children:[e.isOwner&&Object(h.jsx)("button",{onClick:function(){c(!0)},children:"Edit"}),Object(h.jsx)(Le,Object(_.a)({},e))]})})}var Ee="ADD-POST",Te="SET-USER-PROFILE",Ie="SET-USER-PHOTOS",Ue={myPosts:[{id:1,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id itaque obcaecati pariatur sit veniam! Accusantium adipisci delectus dolor doloribus dolorum ea harum in ipsum iste minus, quo ratione temporibus unde.",likesCount:5},{id:2,text:"Lorem ipsum dolor sit amet.",likesCount:6},{id:3,text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nisi, tempora!",likesCount:8}],profile:{},authProfile:{}};var Me=function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e);case 2:r=t.sent,n({type:Te,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:var n={id:123,text:t.text,likesCount:0};return Object(_.a)(Object(_.a)({},e),{},{myPosts:[].concat(Object(S.a)(e.myPosts),[n])});case Te:return t.profile?Object(_.a)(Object(_.a)({},e),{},{profile:t.profile}):e;case Ie:return Object(_.a)(Object(_.a)({},e),{},{profile:Object(_.a)(Object(_.a)({},e.profile),{},{photos:Object(_.a)({},t.photos)})})}return e},Je=n(45),He=n.n(Je),Be=n(39),ze=n.n(Be);function qe(e){var t=e.text,n=e.likesCount;return Object(h.jsxs)("div",{className:ze.a.container,children:[Object(h.jsxs)("div",{className:ze.a.infoProfile,children:[Object(h.jsx)("img",{className:ze.a.avatar,src:"https://img.novosti-n.org/upload/ukraine/499685.jpg",alt:""}),Object(h.jsx)("span",{children:"Anton"})]}),Object(h.jsx)("div",{className:ze.a.likesCount,children:n}),Object(h.jsx)("div",{className:ze.a.postText,children:Object(h.jsx)("p",{children:t})})]})}var Ve=Object(u.b)((function(e){return{myPosts:e.profilePage.myPosts,profile:e.profilePage.profile}}),{addPost:function(e){return{type:Ee,text:e}}})((function(e){var t=Object(r.useState)(""),n=Object(y.a)(t,2),a=n[0],c=n[1],i=e.myPosts.map((function(e){return Object(h.jsx)(qe,{id:e.id,text:e.text,likesCount:e.likesCount},e.id)}));return Object(h.jsxs)("div",{className:He.a.container,children:[Object(h.jsx)("h2",{children:"My Posts"}),Object(h.jsxs)("div",{className:He.a.addPostForm,children:[Object(h.jsx)("textarea",{className:He.a.textarea,value:a,onChange:function(e){c(e.currentTarget.value)}}),Object(h.jsx)("button",{className:He.a.button,onClick:function(){e.addPost(a),c("")},children:"add Post"})]}),i]})}));function Ye(e){var t=e.profile,n=e.updateProfile,r=e.updatePhoto,a=e.isOwner;return Object(h.jsxs)("div",{className:Pe.a.container,children:[Object(h.jsx)("img",{className:Pe.a.main_photo,src:"https://storge.pic2.me/c/1360x800/778/58619cae890e5.jpg",alt:"Main photo"}),null!==t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(De,{profile:t,updateProfile:n,updatePhoto:r,isOwner:a}),Object(h.jsx)(Ve,{})]}):Object(h.jsx)(pe,{})]})}var We=Object(oe.c)(Object(u.b)((function(e){var t;return{profile:e.profilePage.profile,authUserID:null===(t=e.auth.userData)||void 0===t?void 0:t.id}}),{getProfile:Me,updateProfile:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n,r){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:if(0!==t.sent.resultCode){t.next=7;break}return a=r().auth.userData.id,t.next=7,n(Me(a));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e);case 2:if(0!==(r=t.sent).resultCode){t.next=6;break}return t.next=6,n((a=r.data.photos,{type:Ie,photos:a}));case 6:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g.g,ie.a)((function(e){var t=Object(r.useState)(!0),n=Object(y.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),o=Object(y.a)(i,2),s=o[0],u=o[1];return Object(r.useEffect)((function(){var t;a&&c(!1);var n=null!==(t=e.match.params.userID)&&void 0!==t?t:e.authUserID;te(Object(P.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile(+n);case 2:case"end":return t.stop()}}),t)}))),u)}),[e.match.params.userID]),Object(h.jsx)(h.Fragment,{children:s||a?Object(h.jsx)(pe,{}):Object(h.jsx)(Ye,Object(_.a)(Object(_.a)({},e),{},{isOwner:!e.match.params.userID}))})})),Ze=n(40),Ge=n.n(Ze);function Ke(e){return Object(h.jsxs)("div",{className:Ge.a.Header,children:[Object(h.jsx)("div",{className:Ge.a.logoBlock,children:Object(h.jsx)("img",{src:"https://image.winudf.com/v2/image1/Y29tLmRveHVhbnZpbmgucmVhY3RibG9nc19pY29uXzE1ODg4MDQ2MTdfMDY4/icon.png?w=100&fakeurl=1",alt:""})}),Object(h.jsx)("div",{className:Ge.a.navBlock,children:e.isLogin&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b.b,{to:"/profile",className:Ge.a.navLink,children:e.login}),Object(h.jsx)("button",{className:Ge.a.navLink,onClick:e.logout,children:"Logout"})]})})]})}var Xe="SET-USER-DATA",Qe="SET-USER-PROFILE-DATA",$e="SET-AUTH",et="SET-ERROR",tt="SET-CAPTCHA",nt={isLogin:!1,userData:null,error:null,captcha:null,profile:null};var rt=function(e){return{type:Xe,userData:e}},at=function(e){return{type:Qe,profileData:e}},ct=function(e){return{type:$e,isLogin:e}},it=function(e){return{type:et,error:e}},ot=function(e){return{type:tt,captcha:e}},st=function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(0!==(n=e.sent).resultCode){e.next=10;break}return t(rt(n.data)),e.next=7,U(n.data.id);case 7:r=e.sent,t(at(r)),t(ct(!0));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:(n=e.sent)&&t(ot(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return Object(_.a)(Object(_.a)({},e),{},{isLogin:t.isLogin});case Qe:return Object(_.a)(Object(_.a)({},e),{},{profile:t.profileData});case Xe:return Object(_.a)(Object(_.a)({},e),{},{userData:t.userData});case et:return Object(_.a)(Object(_.a)({},e),{},{error:t.error});case tt:return Object(_.a)(Object(_.a)({},e),{},{captcha:t.captcha});default:return e}};var jt=Object(u.b)((function(e){var t;return{login:null===(t=e.auth.userData)||void 0===t?void 0:t.login,isLogin:e.auth.isLogin}}),{logout:function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:0===e.sent.resultCode&&(t(ct(!1)),t(rt(null)),t(at(null)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(h.jsx)(Ke,{login:e.login,isLogin:e.isLogin,logout:e.logout})})),bt=n(46),dt=n.n(bt);function ft(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)(pt,{})]})}var pt=Object(u.b)((function(e){return{isLogin:e.auth.isLogin,error:e.auth.error,captcha:e.auth.captcha}}),{login:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(n){var r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:r=t.sent,t.t0=r.resultCode,t.next=0===t.t0?6:10===t.t0?11:14;break;case 6:return t.next=8,n(st());case 8:return n(it(null)),n(ot(null)),t.abrupt("break",16);case 11:return t.next=13,n(ut());case 13:return t.abrupt("break",16);case 14:return n(it(r.messages.join())),t.abrupt("break",16);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(h.jsx)(h.Fragment,{children:e.isLogin?Object(h.jsx)(g.a,{to:"/profile"}):Object(h.jsx)(Ne.d,{initialValues:{email:"",password:"",remember:!1,captcha:""},validate:function(t){var n={};return Ce.c().required("Required").validate(t.email).catch((function(e){var t=e.errors;n.email=t[0]})),Ce.c().required("Required").min(6,"Too Short!").max(50,"Too Long!").validate(t.password).catch((function(e){var t=e.errors;n.password=t[0]})),e.captcha&&Ce.c().required("Required").validate(t.captcha).catch((function(e){var t=e.errors;n.captcha=t[0]})),n},onSubmit:function(){var t=Object(P.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.login(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:Object(h.jsxs)(Ne.c,{className:dt.a.form,children:[e.error,e.captcha&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{src:e.captcha,alt:"captcha"}),Object(h.jsx)("label",{htmlFor:"captcha",children:"Captcha"}),Object(h.jsx)(Ne.b,{name:"captcha",placeholder:"captcha",tabIndex:1}),Object(h.jsx)(Ne.a,{component:"div",name:"captcha",className:dt.a.error})]}),Object(h.jsx)("label",{htmlFor:"email",children:" Email"}),Object(h.jsx)(Ne.b,{name:"email",placeholder:"email",tabIndex:1}),Object(h.jsx)(Ne.a,{component:"div",name:"email",className:dt.a.error}),Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)(Ne.b,{name:"password",placeholder:"password",type:"password",tabIndex:2}),Object(h.jsx)(Ne.a,{component:"div",name:"password",className:dt.a.error}),Object(h.jsx)("label",{htmlFor:"remember",children:"Remember password"}),Object(h.jsx)(Ne.b,{name:"remember",type:"checkbox",tabIndex:3,autoComplete:"off"}),Object(h.jsx)("button",{type:"submit",tabIndex:4,children:"Submit"})]})})})})),Ot="SET-INITIALISATION",ht={isInitialisation:!1},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ot:return Object(_.a)(Object(_.a)({},e),{},{isInitialisation:!0});default:return e}},mt=a.a.lazy((function(){return n.e(3).then(n.bind(null,255))}));var vt=Object(u.b)((function(e){return{isInitialisation:e.app.isInitialisation}}),{setInitialisation:function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(st());case 2:t({type:Ot});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isInitialisation,n=e.setInitialisation;return Object(r.useEffect)((function(){t||n()}),[t]),Object(h.jsx)(h.Fragment,{children:t?Object(h.jsxs)("div",{className:s.a.App,children:[Object(h.jsx)(jt,{}),Object(h.jsx)("aside",{children:Object(h.jsx)(v,{})}),Object(h.jsx)("main",{children:Object(h.jsxs)(g.d,{children:[Object(h.jsx)(g.b,{path:"/login",render:function(){return Object(h.jsx)(ft,{})}}),Object(h.jsx)(g.b,{path:"/profile/:userID?",render:function(){return Object(h.jsx)(We,{})}}),Object(h.jsx)(g.b,{path:"/messages",render:function(){return Object(h.jsx)(r.Suspense,{fallback:Object(h.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),children:Object(h.jsx)(mt,{})})}}),Object(h.jsx)(g.b,{path:"/users",render:function(){return Object(h.jsx)(ke,{})}}),Object(h.jsx)(g.a,{from:"/",to:"/profile"})]})})]}):Object(h.jsx)("div",{style:{height:"100vh"},children:Object(h.jsx)(pe,{})})})})),gt=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,254)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},_t=n(119),kt=n(107),wt=[{id:1,name:"Anton"},{id:2,name:"Dima"},{id:3,name:"Sveta"}];var Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return e},yt=Object(oe.b)({friends:Pt,messagesPage:kt.b,profilePage:Re,usersPage:X,auth:lt,app:xt}),St=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.c,Nt=Object(oe.d)(yt,St(Object(oe.a)(_t.a)));i.a.render(Object(h.jsx)(b.a,{children:Object(h.jsx)(u.a,{store:Nt,children:Object(h.jsx)(vt,{})})}),document.getElementById("root")),gt()},32:function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__zaf3x",navlink:"Sidebar_navlink__1DyOZ",active:"Sidebar_active__8lVkR"}},38:function(e,t,n){e.exports={container:"Pagination_container__12ne5",selectedPage:"Pagination_selectedPage__2AEIe",pagination:"Pagination_pagination__mpiS3",navButton:"Pagination_navButton__2puVG"}},39:function(e,t,n){e.exports={container:"Post_container__380Sa",infoProfile:"Post_infoProfile__3MdhR",avatar:"Post_avatar__3DEv-",postText:"Post_postText__3Ya8d",likesCount:"Post_likesCount__2ffec"}},40:function(e,t,n){e.exports={Header:"Header_Header__18I3j",logoBlock:"Header_logoBlock___4Z5t",navBlock:"Header_navBlock__2Z-tu",navLink:"Header_navLink__1inL3"}},45:function(e,t,n){e.exports={addPostForm:"MyPosts_addPostForm__Bwop-",textarea:"MyPosts_textarea__EW9Dr",button:"MyPosts_button__PRCOR"}},46:function(e,t,n){e.exports={form:"Login_form__2CHyd",error:"Login_error__UqWgx"}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n(120),c=(n(1),n(10)),i=n(13),o=n(0),s=function(e){return{isLogin:e.auth.isLogin}};function u(e){return Object(i.b)(s,{})((function(t){var n=t.isLogin,i=Object(a.a)(t,["isLogin"]);return n?Object(o.jsx)(e,Object(r.a)({},i)):Object(o.jsx)(c.a,{to:"/login"})}))}},61:function(e,t,n){e.exports={container:"User_container__1CCo_",avatarBlock:"User_avatarBlock__3ns4R",status:"User_status__2ek1b"}},72:function(e,t,n){e.exports={friends:"MyFriends_friends__1AAzK"}},75:function(e,t,n){e.exports={container:"Profile_container__1-PTx",main_photo:"Profile_main_photo__7hm7E"}}},[[248,1,2]]]);
//# sourceMappingURL=main.a3c72fdf.chunk.js.map